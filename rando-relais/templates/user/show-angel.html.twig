{% extends 'base.html.twig' %}

{% block header %}
			{% include "layout/header-shared.html.twig" %}
{% endblock %}

{% block body %}
   {# If user is logged in (either ROLE_USER or ROLE_ADMIN), display the Angel profile #}
   {% if is_granted('ROLE_USER') or is_granted('ROLE_ADMIN') %}
      <main>
         <!-- information about the Angel -->
         <section class="mx-5 my-3 d-flex flex-column align-items-center align-items-md-start">
            <div>
               <h2>A propos de moi</h2>
            </div>
            <div class="mb-3 mt-4 d-inline-flex flex flex-column flex-md-row">
               <div>
                  <!-- angel's avatar -->
                  <img src="{{ asset('assets/images/profile_picture/' ~ angelData.picture) }}" class="rounded avatar-size mb-2" alt="photo de profile">
               </div>
               <div class="card-body d-flex flex-column align-items-center align-items-md-start pt-0">
                  <!-- first name of the angel -->
                  <h5 class="card-title">{{ angelData.firstName | capitalize }}</h5>
                  <ul class="card-text list-style ps-0 d-flex flex-column align-items-center align-items-md-start">
                     <!-- city -->
                     <li>{{ angelData.city | capitalize }}</li>
                     <!-- zip code -->
                     <li>{{ angelData.zipCode }}</li>
                     <!-- phone number -->
                     <li>{{ angelData.phoneNumber }}</li>
                     <!-- email address -->
                     <li>{{ angelData.email }}</li>
                  </ul>
               </div>
            </div>
         </section>
         <!-- information about the service -->
         <section class="mx-5 my-3">
            <div class="d-flex justify-content-center justify-content-md-start mb-3">
               <h2>Mes services</h2>
            </div>
            <div class="d-lg-flex flex-lg-row flex-wrap">
            {% for service in angelData.services %}
               <!-- logo and name of the service -->
               <div class="d-flex flex-column align-items-center">
                  <img src="{{ asset('assets/images/service_icons/' ~ service.image) }}" alt="logo du service {{ service.name }}" class="logo-service">
                  <p class="pe-4 ps-4 text-center">{{ service.name }}</p>
               </div>
         {% endfor %}
            </div>
         </section>
         {# User reviews #}
         <section>
            <h4 class="mx-5">Commentaires</h2>
            <ul class="mt-4">
               {% for review in userReviews %}
                  <li>
                     <p class="fw-bold m-0">GÃ©rard<span class="fw-normal">| {{review.rating}}/5</span></p>
                     <small class="text-secondary">Le {{review.createdAt | date("m/d/Y")}}</small>
                     <p>{{review.comment}}</p>
                  </li>
               {% endfor %}
            </ul>
         </section>
      </main>
   {% else %}
      {# TODO: Display a message when the user is not logged in, or redirect him to the homepage #}
   {% endif %}



{% endblock %}
